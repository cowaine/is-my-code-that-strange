# 리팩터링 : 기존의 코드를 성장시키는 기술

## 리팩터링의 흐름
- 리팩터링 : 동작은 유지하면서 구조만 정리하는 작업

### 1. 중첩을 제거하여 보기 좋게 만들기
- if 중첩문을 제거 -> 조기 리턴, 조건 반전

### 2. 의미 단위로 로직 정리하기
- 조건 확인과 값 대입 로직을 각각 분리해서 정리

### 3. 조건을 읽기 쉽게 하기
- ex. 논리 부정 연산자에 대해, 반전 메서드를 만들어 가독성 증가

### 4. 무턱대고 작성한 로직을 목적을 나타내는 메서드로 바꾸기


## 단위 테스트로 리팩터링 중 실수 방지하기
- 단위 테스트는 실수를 확실하게 줄여줄 수 있다.
- 리팩터링과 단위 테스트는 항상 세트이다.

### 1. 코드 과제 정리하기
### 2. 테스트 코드를 사용한 리펙터링 흐름
1. 이상적인 구조의 클래스 기본 형태를 어느 정도 잡는다.
2. 이 기본 형태를 기반으로 테스트 코드를 작성한다.
3. 테스트를 실패시킨다.
4. 테스트를 성공싴기 위한 최소한의 코드를 작성한다.
5. 기본 형태의 클래스 내부에서 리팩터링 대상 코드를 호출한다.
6. 테스트가 성공할 수 있도록, 조금씩 로직을 이상적인 구조로 리팩터링한다.


## 불확실한 사양을 이해하기 위한 분석 방법
- 실제 개발을 하다 보면 사양을 제대로 모르는 경우도 꽤 많다.
- 테스트가 없는 코드에 테스트를 추가해서 안전하게 리팩터링할 수 있다.

### 1. 문서화 테스트
- 적당한 값을 입력해서 테스트를 진행하고, 실패 및 성공에 대해 기록한다.
- 이를 통해 해당 메서드가 어떤 기능을 하는지 알 수 있다.

### 2. 스크래치 리팩터링
- 테스트 코드를 작성하지 않고, 코드를 리팩터링해서 가독성을 좋게 만든다.
- 이를 통해 이상적인 구조가 보이고, 테스트 코드를 작성할 수 있게 된다.
- 역할을 마치면 코드를 파기시킨다.


## IDE의 리팩터링 기능
### 1. 리네임
- 한 번에 클래스, 메서드, 변수의 이름을 전부 변경하는 기능
### 2. 메서드 추출
- 로직 일부를 메서드로 추출해 주는 기능


## 리팩터링 시 주의 사항
### 1. 기능 추가와 리팩터링 동시에 하지 않기
- 한번에 한다면 내가 지금 기능을 추가하고 있는지, 아니면 리팩터링하고 있는지 구분하기 힘들다.
- 커밋도 구분해야, 기능 추가를 위한 커밋인지 리팩터링을 위한 커밋인지 구분할 수 있다.

### 2. 작은 단계로 실시하기
- 리팩터링도 작은 단계에 따라 커미승ㄹ 구분하는 것이 좋다.

### 3. 불필요한 사양은 제거 고려하기
- 코드에 버그가 있거나 다른 사양과 모순되는 점이 있다면 리팩터링해도 바로잡기 힘들다.
- 불필요한 사양과 코드를 미리 제거할 수 있다면, 더 퀘적하기 리팩터링할 수 있다.
