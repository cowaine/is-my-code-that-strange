# 강한 결합 : 복잡하게 얽혀서 풀 수 없는 구조
- **강한 결합** : 어떤 클래스가 다른 클래스에 많이 의존하고 있는 구조
- **느슨한 결합** : 결합도가 낮은 구조

## 결합도와 책무
- **책임**이란, 자신의 관심사와 관련해서 정상적으로 동작하도록 제어하는 것이다.
- **단일 책임 원칙**은 클래스가 담당하는 책임은 하나로 제한해야 한다는 설계원칙이다.
- 하나의 클래스가 다른 클래스가 가지고있어야 할 책무를 가지고 있다면, 강한 결합이 발생한다.
- 따라서 책임이 하나가 되도록 클래스를 설계해야 한다.

### DRY 원칙의 잘못된 적용
- 책무를 생각하지 않고 로직의 중복을 제거하면 안 된다. 그럴 경우 하나로 모인 로직이 여러 책무를 담당해야 한다.
- DRY는 각각의 개념 단위내에서 반복을 하지 말라는 의미다. 같은 로직, 비슷한 로직이라도 개념이 다르면 중복을 허용해야 한다.
- 개념이 다른 코드는 일반화해서는 안된다.

# 다양한 강한 결합 사례와 대처 방법
## 상속과 관련된 강한 결합
- 상속은 주의해서 다루지 않으면, 강한 결합을 유발한다.
- 슈퍼 클래스 의존
  - 서브 클래스는 슈퍼 클래스의 구조를 하나하나 신경써야 한다.
  - 그리고 슈퍼 클래스는 서브 클래스를 딱히 신경 쓰지 않고 변경한다.
- 상속보다 컴포지션을 활용한다.
  - 상속은 서로의 구조를 알아야 하지만, 컴포지션은 서로의 구조를 몰라도 되므로 영향 범위가 적다.

```java
class FighterPhysicalAttack {
    private final PhysicalAttack physicalAttack;
    
    ...
}
```

- 상속을 사용하면, 슈퍼 클래스가 공통 로직을 두는 장소로 사용될 수 있다.
- 상속은 강한 결합과 로직 분산 등 여러 악마를 불러들이기 때문에 신중하게 사용해야 한다.
- 상속은 반드시 단일 책임 원칙을 염두에 두고 구현해야 한다.

## 인스턴스 변수별로 클래스 분할이 가능한 로직
- 책임이 다른 메서드가 한 클래스 안에 정의되어 있으면, 여러 문제가 발생한다.
- 클래스 안에 책임이 다른 인스턴스 변수 / 메서드가 있다면, 분리하는 것이 좋다.
- 의존 관계를 나타내는 **영향 스케치**를 그려보면 관계를 이해하기 쉽다.
  - `Jig`과 같은 도구들이 있다.

## 특별한 이유 없이 public 사용하지 않기
- 특별한 이유 없이 `public`을 붙이면, 강한 결합 구조가 되어버리기 쉽다.
- 관계를 맺지 않았으면 하는 클래스끼리도 결합되기 때문이다.
- 그렇게 되면 강한 결합 구조가 되어, 유지보수가 어려워진다.
- 접근자를 생략하면 `default`(`package private`) 상태이다. 이는 패키지들의 불필요한 의존 관계를 피할 때 `package private`이 적절하기 때문이다.
- 패키지 외부에 공개할 필요가 있는 클래스에 한해서만 `public`으로 선언한다.

## private 메서드가 너무 많다는 것은 책임이 너무 많다는 것
- `private` 메서드가 너무 많이 쓰인 클래스는 하나가 아닌 너무 많은 책임을 갖고 있을 가능성이 높다.
- 책임이 다른 메서드는 다른 클래스로 분리하는 것이 좋다.

## 높은 응집도를 오해해서 생기는 강한 결합
- 응집도가 높다는 개념을 염두에 두고, 관련이 깊다고 생각되는 로직을 한공세 모으려고 했지만 결과적으로 강한 결합 구조를 만드는 상황이 자주 일어난다.
- 그렇기 때문에 "결합이 느슨하고 응집도가 높은 설계"라고 한 덩어리로 묶어 이야기해야 한다.

## 스마트 UI
- **스마트 UI** : 화면 표시를 담당하는 클래스 주에서 화면 표시와 직접적인 관련이 없는 책무가 구현되어 있는 클래스
- 디자인을 변경하다 다른 것이 동작하지 않는 경우가 발생한다.
- 서로 다른 클래스로 분할하는 것이 좋다.

## 거대 데이터 클래스
- 데이터 클래스가 더욱 커지면 거대 데이터 클래스가 된다.
- 클래스를 '데이터를 편리하게 운반하는 역할'로 인식하고 데이터를 추가하기 쉽다.
- 수많은 유스케이스에서 사용될 가능성이 크고, 전역 변수와 동일한 유형의 다양한 문제가 발생할 수 있다.

## 트랜잭션 스크립트 패턴
- **트랜잭션 스크립트 패턴** : 메서드 내부에 일련의 처리가 하나하나 길게 작성 되어있는 구조
- 데이터를 보유하고 있는 클래스와 데이터를 처리하는 클래스를 나누어 구현할 때 자주 발생한다.
- 응집도는 낮아지고 결합은 강해지므로 변경하기 어려워진다.

## 갓 클래스
- **갓 클래스** : 하나의 클래스 내부에 수천에서 수만 줄의 로직을 담고 있으며, 수많은 책임을 담당하는 로직이 난잡하게 섞여있는 클래스
- 책무를 파악하기 힘들다
- 기능 수정에 많은 코드를 읽어야 한다.
- 영향 범위 파악 시 높치는 부분이 생기기 쉽다.
- 잘못된 값 때문에 문제가 생겨도 원인을 추적하기 어렵다.

## 강한 결합 클래스 대처 방법
- 객체 지향 설계와 단일 책임 원칙에 따라 제대로 설계하면 된다.
- 책임별로 클래스를 분할해야 한다.
